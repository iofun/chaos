<!DOCTYPE html>
<html lang="en">
<head>
          <title>Luerl: Lua in Erlang</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta charset="utf-8" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Luerl: Lua in Erlang Full Atom Feed" />
        <link href="/feeds/updates.atom.xml" type="application/atom+xml" rel="alternate" title="Luerl: Lua in Erlang Categories Atom Feed" />
        <!-- twitter card metadata -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/luerl.png">
<meta name="twitter:site" content="@rvirding">
<meta name="twitter:title" content="Lua in Erlang">
<meta name="twitter:description" content=""Scripting is a relevant technique for any programmer's toolbox." &mdash; Roberto Ierusalimschy">
        <!-- OG Tags -->
<meta property="og:url" content="/2020/02/20/lua-in-erlang/"/>
<meta property="og:title" content="Luerl: Lua in Erlang | Lua in Erlang" />
<meta property="og:description" content=""Scripting is a relevant technique for any programmer's toolbox." &mdash; Roberto Ierusalimschy" />
        <!-- favicon -->
        <link rel="icon" type="image/png" href="/images/luerl.png">
        <!-- moment.js for date formatting -->
        <script src="/theme/js/moment.js"></script>
        <!-- css -->
        <link rel="stylesheet" type="text/css" href="/theme/css/main.css" />
		<script>
			
                /*! grunt-grunticon Stylesheet Loader - v2.1.2 | https://github.com/filamentgroup/grunticon | (c) 2015 Scott Jehl, Filament Group, Inc. | MIT license. */
    
    (function(e){function t(t,n,r,o){"use strict";function a(){for(var e,n=0;u.length>n;n++)u[n].href&&u[n].href.indexOf(t)>-1&&(e=!0);e?i.media=r||"all":setTimeout(a)}var i=e.document.createElement("link"),l=n||e.document.getElementsByTagName("script")[0],u=e.document.styleSheets;return i.rel="stylesheet",i.href=t,i.media="only x",i.onload=o||null,l.parentNode.insertBefore(i,l),a(),i}var n=function(r,o){"use strict";if(r&&3===r.length){var a=e.navigator,i=e.Image,l=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||e.opera&&-1===a.userAgent.indexOf("Chrome")||-1!==a.userAgent.indexOf("Series40")),u=new i;u.onerror=function(){n.method="png",n.href=r[2],t(r[2])},u.onload=function(){var e=1===u.width&&1===u.height,a=r[e&&l?0:e?1:2];n.method=e&&l?"svg":e?"datapng":"png",n.href=a,t(a,null,null,o)},u.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",document.documentElement.className+=" grunticon"}};n.loadCSS=t,e.grunticon=n})(this);(function(e,t){"use strict";var n=t.document,r="grunticon:",o=function(e){if(n.attachEvent?"complete"===n.readyState:"loading"!==n.readyState)e();else{var t=!1;n.addEventListener("readystatechange",function(){t||(t=!0,e())},!1)}},a=function(e){return t.document.querySelector('link[href$="'+e+'"]')},c=function(e){var t,n,o,a,c,i,u={};if(t=e.sheet,!t)return u;n=t.cssRules?t.cssRules:t.rules;for(var l=0;n.length>l;l++)o=n[l].cssText,a=r+n[l].selectorText,c=o.split(");")[0].match(/US\-ASCII\,([^"']+)/),c&&c[1]&&(i=decodeURIComponent(c[1]),u[a]=i);return u},i=function(e){var t,o,a;o="data-grunticon-embed";for(var c in e)if(a=c.slice(r.length),t=n.querySelectorAll(a+"["+o+"]"),t.length)for(var i=0;t.length>i;i++)t[i].innerHTML=e[c],t[i].style.backgroundImage="none",t[i].removeAttribute(o);return t},u=function(t){"svg"===e.method&&o(function(){i(c(a(e.href))),"function"==typeof t&&t()})};e.embedIcons=i,e.getCSS=a,e.getIcons=c,e.ready=o,e.svgLoadedCallback=u,e.embedSVG=u})(grunticon,this);
                
                grunticon(["/theme/css/icons.data.svg.css", "/theme/css/icons.data.png.css", "/theme/css/icons.fallback.css"]);
            </script>
        <noscript><link href="/theme/css/icons.fallback.css" rel="stylesheet"></noscript>
        <!-- menu toggle javascript -->
        <script type="text/javascript">
            document.addEventListener("DOMContentLoaded", initMenu);
            
            function initMenu(){
                var menu = document.getElementById("menu");
                var menulink = document.getElementById("menu-link");
                menulink.addEventListener("click", function toggleMenu(){
                        window.event.preventDefault();
                        menulink.classList.toggle('active');
                        menu.classList.toggle('active');              
                    });
            };
        </script>

    <meta name="description" content=""Scripting is a relevant technique for any programmer's toolbox." &mdash; Roberto Ierusalimschy" />


</head>
<body>
    <div role="banner" id="masthead">
        <header>
            <a href="/"><img src="/images/luerl.png" alt="McManus Logo"></a>
            <a href="#menu" id="menu-link">more stuff</a>
            <nav id="menu">
                <ul>
                        <li><a href="/pages/about/">about</a></li>
                        <li><a href="/pages/community/">community</a></li>
                        <li><a href="/pages/questions/">questions</a></li>
                        <li><a href="/pages/showroom/">showroom</a></li>
                            <li class="active"><a href="/category/updates">updates</a></li>
                </ul>
            </nav>
        </header>
    </div>
        <div class="page" role="main">
  <div class="article" role="article">
    <article>
        <footer>
            <a name="top"></a>
            <p>
              <time datetime=" 2020-02-20 00:00:00+01:00">
                <script>document.write(moment('2020-02-20 00:00:00+01:00').format('LL'));</script>
              </time>
            </p>
        </footer>
        <header>
          <h2>
            Lua in Erlang
          </h2>
        </header>
      <div class="content">
         <p>Luerl is an implementation of standard Lua 5.3 written in Erlang/OTP.</p>
<p>Lua is a powerful, efficient, lightweight, embeddable scripting language common in games, IoT devices, machine learning and scientific computing research.</p>
<p>It supports procedural, object-oriented, functional, data-driven, reactive, organizational programming and data description.</p>
<p>Being an extension language, Lua has no notion of a "main" program: it works as a library embedded in a host. The host program can invoke functions to execute a piece of Lua code, can write and read Lua variables, and call Erlang functions by Lua code.</p>
<p>Luerl is a library, written in clean Erlang/OTP. For more information, check out the <a href="https://github.com/rvirding/luerl/wiki/0.2-Getting-started">get started</a> tutorial. You may want to browse the <a href="https://github.com/rvirding/luerl/tree/develop/examples">examples</a> source code.</p>
<h2>Luerl goal</h2>
<p>A proper implementation of the Lua language
- It SHOULD look and behave the same as Lua 5.3
- It SHOULD include the Lua standard libraries
- It MUST interface well with Erlang</p>
<h2>Embedded language</h2>
<p>Lua is an embeddable language implemented as a library that offers a clear API for applications inside a register-based virtual machine.</p>
<p>This ability to be used as a library to extend an application is what makes Lua an extension language. </p>
<p>At the same time, a program that uses Lua can register new functions in the Luerl environment; such functions are implemented in Erlang (or another language) and can add facilities that cannot be written directly in Lua. This is what makes any Lua implementation an extensible language.</p>
<p>These two views of Lua (as extension language and as extensible language) correspond of two kinds of interaction between Erlang and Lua. In the first kind, Erlang has the control and Lua is the library. The Erlang code in this kind of interaction is what we call application code. </p>
<p>In the second kind, Lua has the control and Erlang is the library. Here, the Erlang code is called library code. Both application code and library code use the same API to communicate with Lua, the so called Luerl API.</p>
<p>Modules, Object Oriented programming and iterators need no extra features in the Lua API. They are all done with standard mechanisms for tables and first-class functions with lexical scope.</p>
<p>Exception handling and code load go the opposite way: primitives in the API are exported to Lua from the base system C, JIT, BEAM.</p>
<p>Lua implementations are based on the idea of closures, a closure represents the code of a function plus the environment where the function was defined.</p>
<p>Like with tables, Luerl itself uses functions for several important constructs in the language. The use of constructors based on functions helps to make the API simple and general.</p>
<h2>The result</h2>
<p>Luerl is a native Erlang implementation of standard Lua 5.3 written for the BEAM ecosystem.</p>
<ul>
<li>Easy for Erlang to call </li>
<li>Easy for Lua to call Erlang</li>
<li>Erlang concurrency model and error handling</li>
</ul>
<p>Through the use of the BEAM languages, Luerl can be augmented to cope with a wide range of different domains, creating a customized language sharing a syntactical framework.</p>
      </div>
      <div class="back-to-top">
          <a href="#top">back to top</a>
      </div>
      <div id="disqus_thread"></div>
        <script>
        (function() {
              var d = document, s = d.createElement('script');
              s.src = 'https://luerl.disqus.com/embed.js';
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </article>
  </div>
<!-- end article -->
                <footer>
                    <div class="icons">
                        <a href="https://twitter.com/rvirding" target="_blank"><div class="icon-twitter icon"></div></a>
                        <a href="https://github.com/rvirding/luerl" target="_blank"><div class="icon-github icon"></div></a>
                    </div>
                    <p>© <script>document.write(moment().format('YYYY'));</script> BEAM Community</p>
                </footer>
        </div>
</body>
</html>